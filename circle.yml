general:
  branches:
    ignore:
      - gh-pages
      - master
experimental:
  notify:
    branches:
      only:
        - production

machine:
  node:
    version: 5.7.0
dependencies:
  override:
    - npm install --dev
  cache_directories:
    - sassc
    - libsass
  post:
    - if [[ ! -e sassc ]]; then git clone git@github.com:sass/sassc.git sassc; fi
    - if [[ ! -e libsass ]]; then git clone --recursive git@github.com:sass/libsass.git && cd sassc && export SASS_LIBSASS_PATH=$(readlink -f ../libsass) && make && cd ..; fi
    - ln -s sassc/bin/sassc ~/bin/sassc
deployment:
  production:
    branch: production
    commands:
      - make deploy:production
  staging:
    branch: develop
    commands:
      - make deploy
